{"ast":null,"code":"import _classCallCheck from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Axios from'axios';import CommentPanel from'../components/CommentPanel';import Loader from'react-loader-spinner';import{url}from'../url';import{Icon}from'antd';import'antd/dist/antd.css';import Img from'../components/Img';import CommentList from'../components/CommentList';var PostDetail=/*#__PURE__*/function(_React$Component){_inherits(PostDetail,_React$Component);function PostDetail(){var _getPrototypeOf2;var _this;_classCallCheck(this,PostDetail);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PostDetail)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={post:[],comments:[],openComment:false,loading:false};_this.handleShowComment=function(){_this.setState({openComment:!_this.state.openComment});};return _this;}_createClass(PostDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.setState({loading:true},function(){Axios.get(url+'/getpostwithid?pid='+_this2.props.match.params.pid).then(function(res){_this2.setState({post:res.data.result,comments:res.data.result.comments,loading:false});});});}},{key:\"render\",value:function render(){var _this3=this;console.log(this.state);return React.createElement(\"div\",{className:\"post-container\"},this.state.loading?React.createElement(Loader,{type:\"ThreeDots\",style:{\"display\":\"flex\",\"justifyContent\":\"center\"},color:\"#e87110\",height:\"100\",width:\"100\"}):React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"list-group\"},this.state.post.map(function(item,index){return React.createElement(\"a\",{className:\"list-group-item\",style:{paddingBottom:'0px'},key:index},React.createElement(\"div\",{style:{\"display\":\"flex\",\"flexDirection\":\"row\"}},React.createElement(\"div\",{className:\"comment-avatar\"},React.createElement(Img,{src:url+\"/avatar/\"+item.username+'.jpg',alt:\"\"})),React.createElement(\"div\",{className:\"username\"},React.createElement(\"h4\",null,item.username),React.createElement(\"p\",null,\" Published at \",item.datetime))),React.createElement(\"div\",{className:\"content\",style:{\"padding-bottom\":\"10px\"}},React.createElement(\"p\",null,item.content)),React.createElement(CommentPanel,{isShown:_this3.state.openComment,pid:_this3.props.match.params.pid}),React.createElement(\"div\",{className:\"comment-like\"},React.createElement(\"div\",{className:\"comment-tab\",onClick:_this3.handleShowComment},React.createElement(Icon,{type:\"message\",theme:\"outlined\",style:{fontSize:'18px',color:'ddd'}}),React.createElement(\"span\",{style:{\"fontSize\":\"16px\"}},\" 4\")),React.createElement(\"div\",{className:\"like-tab\"},React.createElement(Icon,{type:\"like\",theme:\"outlined\",style:{fontSize:'18px',color:'ddd'}}),React.createElement(\"span\",{style:{\"fontSize\":\"16px\"}},\" 10\"))));})),React.createElement(CommentList,{post:this.state.post})));}}]);return PostDetail;}(React.Component);export default PostDetail;","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/pages/PostDetail.js"],"names":["React","Axios","CommentPanel","Loader","url","Icon","Img","CommentList","PostDetail","state","post","comments","openComment","loading","handleShowComment","setState","get","props","match","params","pid","then","res","data","result","console","log","map","item","index","paddingBottom","username","datetime","content","fontSize","color","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Axios from 'axios';\nimport CommentPanel from '../components/CommentPanel'\nimport Loader from 'react-loader-spinner'\nimport { url } from '../url'\nimport { Icon } from 'antd';\nimport 'antd/dist/antd.css'\nimport Img from '../components/Img'\nimport CommentList from '../components/CommentList'\n\n\nclass PostDetail extends  React.Component {\n\n    state = {\n       post: [],\n       comments: [],\n       openComment: false,\n       loading: false\n    }\n\n    handleShowComment = () => {\n        this.setState({\n            openComment: !this.state.openComment\n        })\n    }\n    \n    componentDidMount(){\n        this.setState({loading: true}, () => {   \n            Axios.get(url + '/getpostwithid?pid=' + this.props.match.params.pid).then(res => {\n                this.setState({\n                    post: res.data.result,\n                    comments: res.data.result.comments,\n                    loading: false\n                })\n            })\n           \n        })   \n    }\n    \n    render(){\n\n         console.log(this.state)\n        return ( \n            <div className=\"post-container\">\n            {\n                this.state.loading? \n                <Loader type=\"ThreeDots\" \n                    style={{\"display\": \"flex\", \"justifyContent\": \"center\"}} \n                    color=\"#e87110\" \n                    height=\"100\" \n                    width=\"100\" />\n                :\n                <React.Fragment>\n                    <div className=\"list-group\">\n                    {\n                      this.state.post.map((item, index) => {\n                       return (       \n                        <a className=\"list-group-item\" style={{paddingBottom: '0px'}} key={index}>\n                            <div style={{\"display\": \"flex\", \"flexDirection\": \"row\"}}>\n                                <div className=\"comment-avatar\">\n                                    <Img src={url + \"/avatar/\" + item.username + '.jpg'} alt=\"\"/>\n                                </div>\n                                 <div className=\"username\">\n                                    <h4>{item.username}</h4> \n                                    <p> Published at {item.datetime}</p>\n                                </div>\n                             </div>\n                            <div className=\"content\" style={{\"padding-bottom\": \"10px\"}}>\n                                <p>{item.content}</p>\n                            </div>    \n                            <CommentPanel isShown={this.state.openComment} pid={this.props.match.params.pid}/>\n                            <div className=\"comment-like\">\n                            <div className=\"comment-tab\" onClick={this.handleShowComment}>\n                                <Icon type=\"message\" \n                                    theme=\"outlined\" \n                                    style={{ fontSize: '18px', color: 'ddd' }}/>\n                                <span style={{\"fontSize\": \"16px\"}}> 4</span>\n                             </div>\n                            <div className=\"like-tab\">\n                                <Icon type=\"like\" \n                                        theme=\"outlined\" \n                                        style={{ fontSize: '18px', color: 'ddd' }}/>\n                                    <span style={{\"fontSize\": \"16px\"}}> 10</span>\n                                </div>\n                            </div>             \n                        </a> \n                       )\n                   })\n                }\n                </div>\n                <CommentList post={this.state.post}/>\n            </React.Fragment>\n            }\n           </div>\n\n        )\n    }\n}\n\n\n\nexport default PostDetail"]},"metadata":{},"sourceType":"module"}