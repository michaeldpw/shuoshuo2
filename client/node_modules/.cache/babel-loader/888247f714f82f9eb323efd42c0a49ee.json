{"ast":null,"code":"var _jsxFileName = \"/Users/peiwendu/Desktop/shuoshuo2.0/client/src/components/CommentPanel.js\";\nimport React from 'react';\nimport Img from './Img';\nimport { connect } from 'react-redux';\nimport { url } from '../url';\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom';\n\nclass CommentPanel extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      comment: '',\n      loading: false\n    };\n\n    this.handleInputChange = e => {\n      this.setState({\n        comment: e.target.value\n      });\n    };\n\n    this.handleSubmit = () => {\n      if (!this.props.auth.user) {\n        this.props.history.push('/signin');\n        return;\n      }\n\n      const comment = {\n        _id: Date.now().toString(),\n        pid: this.props.pid,\n        author: this.props.auth.user,\n        content: this.state.comment,\n        createdAt: new Date()\n      };\n      this.setState({\n        loading: true\n      });\n      Axios.post(url + '/postcomment', comment).then(res => {\n        this.setState({\n          loading: false\n        });\n      });\n      this.props.history.push('/post/' + this.props.pid);\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"comment-panel\",\n      style: {\n        \"display\": this.props.isShown ? 'flex' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(Img, {\n      src: url + \"/avatar/\" + this.props.auth.user + '.jpg',\n      alt: \"\",\n      style: {\n        \"height\": \"30px\",\n        \"width\": \"30px\",\n        \"border-radius\": \"15px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleInputChange,\n      placeholder: \"Say something...\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), this.state.loading ? React.createElement(\"button\", {\n      onClick: this.handleSubmit,\n      disabled: !this.state.comment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Submitting...\") : React.createElement(\"button\", {\n      onClick: this.handleSubmit,\n      disabled: !this.state.comment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Submit\"));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, null)(CommentPanel));","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/components/CommentPanel.js"],"names":["React","Img","connect","url","Axios","withRouter","CommentPanel","Component","state","comment","loading","handleInputChange","e","setState","target","value","handleSubmit","props","auth","user","history","push","_id","Date","now","toString","pid","author","content","createdAt","post","then","res","render","isShown","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAGA,MAAMC,YAAN,SAA2BN,KAAK,CAACO,SAAjC,CAA2C;AAAA;AAAA;AAAA,SAEvCC,KAFuC,GAE/B;AACJC,MAAAA,OAAO,EAAC,EADJ;AAEJC,MAAAA,OAAO,EAAE;AAFL,KAF+B;;AAAA,SAQvCC,iBARuC,GAQlBC,CAAD,IAAO;AACvB,WAAKC,QAAL,CAAc;AACVJ,QAAAA,OAAO,EAAEG,CAAC,CAACE,MAAF,CAASC;AADR,OAAd;AAGH,KAZsC;;AAAA,SAcvCC,YAduC,GAcxB,MAAM;AACjB,UAAI,CAAC,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,IAArB,EAA2B;AACzB,aAAKF,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB;AACA;AACD;;AAED,YAAMZ,OAAO,GAAG;AACZa,QAAAA,GAAG,EAAEC,IAAI,CAACC,GAAL,GAAWC,QAAX,EADO;AAEZC,QAAAA,GAAG,EAAE,KAAKT,KAAL,CAAWS,GAFJ;AAGZC,QAAAA,MAAM,EAAE,KAAKV,KAAL,CAAWC,IAAX,CAAgBC,IAHZ;AAIZS,QAAAA,OAAO,EAAE,KAAKpB,KAAL,CAAWC,OAJR;AAKZoB,QAAAA,SAAS,EAAE,IAAIN,IAAJ;AALC,OAAhB;AAQA,WAAKV,QAAL,CAAc;AAACH,QAAAA,OAAO,EAAE;AAAV,OAAd;AACAN,MAAAA,KAAK,CAAC0B,IAAN,CAAW3B,GAAG,GAAG,cAAjB,EAAiCM,OAAjC,EAA0CsB,IAA1C,CAA+CC,GAAG,IAAI;AAC9C,aAAKnB,QAAL,CAAc;AACVH,UAAAA,OAAO,EAAE;AADC,SAAd;AAGP,OAJD;AAKA,WAAKO,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,WAAU,KAAKJ,KAAL,CAAWS,GAA7C;AACH,KAnCsC;AAAA;;AAsCvCO,EAAAA,MAAM,GAAE;AACJ,WACI;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,KAAK,EAAE;AAAC,mBAAY,KAAKhB,KAAL,CAAWiB,OAAX,GAAmB,MAAnB,GAA0B;AAAvC,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,GAAD;AAAK,MAAA,GAAG,EAAE/B,GAAG,GAAG,UAAN,GAAmB,KAAKc,KAAL,CAAWC,IAAX,CAAgBC,IAAnC,GAA0C,MAApD;AACI,MAAA,GAAG,EAAC,EADR;AAEI,MAAA,KAAK,EAAE;AAAC,kBAAU,MAAX;AAAmB,iBAAS,MAA5B;AAAoC,yBAAiB;AAArD,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAII;AAAO,MAAA,IAAI,EAAC,MAAZ;AACQ,MAAA,QAAQ,EAAE,KAAKR,iBADvB;AAEQ,MAAA,WAAW,EAAC,kBAFpB;AAEuC,MAAA,QAAQ,MAF/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EASQ,KAAKH,KAAL,CAAWE,OAAX,GACA;AAAQ,MAAA,OAAO,EAAE,KAAKM,YAAtB;AAAoC,MAAA,QAAQ,EAAE,CAAC,KAAKR,KAAL,CAAWC,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADA,GAGA;AAAQ,MAAA,OAAO,EAAE,KAAKO,YAAtB;AAAoC,MAAA,QAAQ,EAAE,CAAC,KAAKR,KAAL,CAAWC,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZR,CADJ;AAkBH;;AAzDsC;;AA+D3C,MAAM0B,eAAe,GAAI3B,KAAD,IAAW;AAC3B,SAAO;AACHU,IAAAA,IAAI,EAAEV,KAAK,CAACU;AADT,GAAP;AAGH,CAJL;;AAMA,eAAeb,UAAU,CAACH,OAAO,CAACiC,eAAD,EAAkB,IAAlB,CAAP,CAA+B7B,YAA/B,CAAD,CAAzB","sourcesContent":["import React from 'react'\nimport Img from './Img'\nimport { connect } from 'react-redux';\nimport { url } from '../url'\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom'\n\n\nclass CommentPanel extends React.Component {\n\n    state = {\n        comment:'',\n        loading: false\n        \n    }\n\n    handleInputChange = (e) => {\n        this.setState({\n            comment: e.target.value\n        })\n    }\n\n    handleSubmit = () => {\n        if (!this.props.auth.user) {\n          this.props.history.push('/signin');\n          return;\n        }\n\n        const comment = {\n            _id: Date.now().toString(),\n            pid: this.props.pid,\n            author: this.props.auth.user,\n            content: this.state.comment,\n            createdAt: new Date()\n        }\n\n        this.setState({loading: true});\n        Axios.post(url + '/postcomment', comment).then(res => {\n                this.setState({\n                    loading: false\n                })\n        })\n        this.props.history.push('/post/'+ this.props.pid)\n    }\n\n\n    render(){\n        return (\n            <div className=\"comment-panel\" style={{\"display\": (this.props.isShown?'flex':'none')}}  >\n                <Img src={url + \"/avatar/\" + this.props.auth.user + '.jpg'} \n                    alt=\"\"\n                    style={{\"height\": \"30px\", \"width\": \"30px\", \"border-radius\": \"15px\"}}/>\n                <input type=\"text\" \n                        onChange={this.handleInputChange} \n                        placeholder=\"Say something...\" required/>\n\n                {\n                    this.state.loading?\n                    <button onClick={this.handleSubmit} disabled={!this.state.comment}>Submitting...</button>\n                    :\n                    <button onClick={this.handleSubmit} disabled={!this.state.comment}>Submit</button>\n                }\n               \n            </div>\n        )\n    }\n\n\n    \n}\n\nconst mapStateToProps = (state) => {\n        return {\n            auth: state.auth\n        }\n    }\n\nexport default withRouter(connect(mapStateToProps, null)(CommentPanel))"]},"metadata":{},"sourceType":"module"}