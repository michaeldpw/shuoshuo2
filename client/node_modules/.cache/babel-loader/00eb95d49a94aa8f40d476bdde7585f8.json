{"ast":null,"code":"import _defineProperty from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import{Redirect}from'react-router-dom';import{url}from'../url';import{connect}from'react-redux';import{login}from'../actions';axios.defaults.withCredentials=true;var SignIn=/*#__PURE__*/function(_React$Component){_inherits(SignIn,_React$Component);function SignIn(){var _getPrototypeOf2;var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={username:'',password:'',error:'',isLoading:false};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.handleClick=function(){_this.props.history.push('/signup');};_this.handleSubmit=function(e){e.preventDefault();var user={username:_this.state.username,password:_this.state.password};// console.log(user);\n// axios.post(url + '/checklogin',user).then(res => {\n//     //console.log(res.data);\n//     this.setState({\n//         code: res.data.code\n//     })    \n// });\n_this.setState({isLoading:true});_this.props.login(user).then(function(res){return _this.context.history.push('/');},function(err){_this.setState({error:err.response.data.error,isLoading:false});console.log(err.response.data);}// res => {\n// this.setState({\n//     isloading: false,\n//     error: res.data.error\n// })\n);};return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var username=this.props.auth.user;if(username){window.location='/';}return React.createElement(\"div\",{className:\"signin-container\"},React.createElement(\"div\",{className:\"signin-panel\"},React.createElement(\"p\",null,\"Log in to Blog\"),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",onChange:this.handleChange,placeholder:\"Username\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",onChange:this.handleChange,placeholder:\"Password\"})),this.state.error&&React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},this.state.error),this.state.isLoading?React.createElement(\"button\",{type:\"submit\",className:\"signin-btn\",style:{\"opacity\":\"0.5\"},disabled:true},\"Logging in...\"):React.createElement(\"button\",{type:\"submit\",className:\"signin-btn\",disabled:false},\"Log In\")),React.createElement(\"div\",{className:\"con\"},React.createElement(\"i\",null),React.createElement(\"p\",null,\"or\")),React.createElement(\"button\",{className:\"create_account\",onClick:this.handleClick,disabled:this.state.isLoading},\"Create a new account\")));}}]);return SignIn;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps,{login:login})(SignIn);","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/pages/SignIn.js"],"names":["React","axios","Redirect","url","connect","login","defaults","withCredentials","SignIn","state","username","password","error","isLoading","handleChange","e","setState","target","id","value","handleClick","props","history","push","handleSubmit","preventDefault","user","then","res","context","err","response","data","console","log","auth","window","location","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { url } from '../url'\nimport { connect } from 'react-redux';\nimport { login } from '../actions'\naxios.defaults.withCredentials = true;\n\nclass SignIn extends React.Component{\n\n    state = {\n        username: '',\n        password:'',\n        error: '',\n        isLoading: false\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleClick = () => {\n        this.props.history.push('/signup');\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        const user = {\n            username: this.state.username,\n            password: this.state.password\n        }\n        // console.log(user);\n        // axios.post(url + '/checklogin',user).then(res => {\n        //     //console.log(res.data);\n        //     this.setState({\n        //         code: res.data.code\n        //     })    \n        // });\n\n        this.setState({isLoading: true});\n        this.props.login(user).then(\n\n            (res) => this.context.history.push('/'),\n            (err) => {\n                this.setState({ error: err.response.data.error, isLoading: false });\n                console.log(err.response.data)\n            }\n            // res => {\n            // this.setState({\n            //     isloading: false,\n            //     error: res.data.error\n            // })\n        )\n    }\n\n    render(){\n        const username = this.props.auth.user;\n        if(username){\n          window.location = '/'\n        } \n        return (\n            <div className=\"signin-container\">\n                <div className=\"signin-panel\">\n                    <p>Log in to Blog</p>\n                    <form onSubmit={this.handleSubmit}>\n                        <div className=\"form-group\">\n                            <input type=\"text\" \n                                className=\"form-control\" \n                                id=\"username\" \n                                onChange={this.handleChange}\n                                placeholder=\"Username\" />\n                        </div>\n                        <div className=\"form-group\">\n                            <input type=\"password\" \n                                className=\"form-control\" \n                                id=\"password\" \n                                onChange={this.handleChange}\n                                placeholder=\"Password\" />\n                        </div>\n                        {\n                            this.state.error &&\n                            <div className=\"alert alert-danger\" role=\"alert\">{this.state.error}</div>\n                        }\n                        {\n                            this.state.isLoading?\n                            <button type=\"submit\" className=\"signin-btn\" style={{\"opacity\": \"0.5\"}}disabled={true}>Logging in...</button>\n                            :\n                            <button type=\"submit\" className=\"signin-btn\" disabled={false}>Log In</button>\n                        }\n                        \n                    </form>\n                    <div className=\"con\">\n                        <i></i>\n                        <p>or</p>\n                    </div>\n                    <button className=\"create_account\" onClick={this.handleClick} disabled={this.state.isLoading}>Create a new account</button>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.auth\n    }\n}\n\nexport default connect(mapStateToProps, { login })(SignIn);"]},"metadata":{},"sourceType":"module"}