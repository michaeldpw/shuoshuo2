{"ast":null,"code":"import _classCallCheck from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Img from'./Img';import{connect}from'react-redux';import{url}from'../url';import Axios from'axios';import{withRouter}from'react-router-dom';var CommentPanel=/*#__PURE__*/function(_React$Component){_inherits(CommentPanel,_React$Component);function CommentPanel(){var _getPrototypeOf2;var _this;_classCallCheck(this,CommentPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CommentPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={comment:'',loading:false};_this.handleInputChange=function(e){_this.setState({comment:e.target.value});};_this.handleSubmit=function(){console.log(_this.props.pid);if(!_this.props.auth.user){_this.props.history.push('/signin');return;}var comment={_id:Date.now().toString(),pid:_this.props.pid,author:_this.props.auth.user,content:_this.state.comment,createdAt:new Date()};_this.setState({loading:true});Axios.post(url+'/postcomment',comment).then(function(res){_this.setState({loading:false});});window.location.reload();};return _this;}_createClass(CommentPanel,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"comment-panel\",style:{\"display\":this.props.isShown?'flex':'none'}},React.createElement(Img,{src:url+\"/avatar/\"+this.props.auth.user+'.jpg',alt:\"\",style:{\"height\":\"30px\",\"width\":\"30px\",\"border-radius\":\"15px\"}}),React.createElement(\"input\",{type:\"text\",onChange:this.handleInputChange,placeholder:\"Say something...\",required:true}),this.state.loading?React.createElement(\"button\",{onClick:this.handleSubmit,disabled:!this.state.comment},\"Submitting...\"):React.createElement(\"button\",{onClick:this.handleSubmit,disabled:!this.state.comment},\"Submit\"));}}]);return CommentPanel;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default withRouter(connect(mapStateToProps,null)(CommentPanel));","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/components/CommentPanel.js"],"names":["React","Img","connect","url","Axios","withRouter","CommentPanel","state","comment","loading","handleInputChange","e","setState","target","value","handleSubmit","console","log","props","pid","auth","user","history","push","_id","Date","now","toString","author","content","createdAt","post","then","res","window","location","reload","isShown","Component","mapStateToProps"],"mappings":"+nBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,GAAT,KAAoB,QAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,GAGMC,CAAAA,Y,maAEFC,K,CAAQ,CACJC,OAAO,CAAC,EADJ,CAEJC,OAAO,CAAE,KAFL,C,OAMRC,iB,CAAoB,SAACC,CAAD,CAAO,CACvB,MAAKC,QAAL,CAAc,CACVJ,OAAO,CAAEG,CAAC,CAACE,MAAF,CAASC,KADR,CAAd,EAGH,C,OAEDC,Y,CAAe,UAAM,CACjBC,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWC,GAAvB,EACA,GAAI,CAAC,MAAKD,KAAL,CAAWE,IAAX,CAAgBC,IAArB,CAA2B,CACzB,MAAKH,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,EACA,OACD,CAED,GAAMf,CAAAA,OAAO,CAAG,CACZgB,GAAG,CAAEC,IAAI,CAACC,GAAL,GAAWC,QAAX,EADO,CAEZR,GAAG,CAAE,MAAKD,KAAL,CAAWC,GAFJ,CAGZS,MAAM,CAAE,MAAKV,KAAL,CAAWE,IAAX,CAAgBC,IAHZ,CAIZQ,OAAO,CAAE,MAAKtB,KAAL,CAAWC,OAJR,CAKZsB,SAAS,CAAE,GAAIL,CAAAA,IAAJ,EALC,CAAhB,CAQA,MAAKb,QAAL,CAAc,CAACH,OAAO,CAAE,IAAV,CAAd,EACAL,KAAK,CAAC2B,IAAN,CAAW5B,GAAG,CAAG,cAAjB,CAAiCK,OAAjC,EAA0CwB,IAA1C,CAA+C,SAAAC,GAAG,CAAI,CAC9C,MAAKrB,QAAL,CAAc,CACVH,OAAO,CAAE,KADC,CAAd,EAGP,CAJD,EAKDyB,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACF,C,+EAGO,CACJ,MACI,4BAAK,SAAS,CAAC,eAAf,CAA+B,KAAK,CAAE,CAAC,UAAY,KAAKlB,KAAL,CAAWmB,OAAX,CAAmB,MAAnB,CAA0B,MAAvC,CAAtC,EACI,oBAAC,GAAD,EAAK,GAAG,CAAElC,GAAG,CAAG,UAAN,CAAmB,KAAKe,KAAL,CAAWE,IAAX,CAAgBC,IAAnC,CAA0C,MAApD,CACI,GAAG,CAAC,EADR,CAEI,KAAK,CAAE,CAAC,SAAU,MAAX,CAAmB,QAAS,MAA5B,CAAoC,gBAAiB,MAArD,CAFX,EADJ,CAII,6BAAO,IAAI,CAAC,MAAZ,CACQ,QAAQ,CAAE,KAAKX,iBADvB,CAEQ,WAAW,CAAC,kBAFpB,CAEuC,QAAQ,KAF/C,EAJJ,CASQ,KAAKH,KAAL,CAAWE,OAAX,CACA,8BAAQ,OAAO,CAAE,KAAKM,YAAtB,CAAoC,QAAQ,CAAE,CAAC,KAAKR,KAAL,CAAWC,OAA1D,kBADA,CAGA,8BAAQ,OAAO,CAAE,KAAKO,YAAtB,CAAoC,QAAQ,CAAE,CAAC,KAAKR,KAAL,CAAWC,OAA1D,WAZR,CADJ,CAkBH,C,0BA1DsBR,KAAK,CAACsC,S,EAgEjC,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAChC,KAAD,CAAW,CAC3B,MAAO,CACHa,IAAI,CAAEb,KAAK,CAACa,IADT,CAAP,CAGH,CAJL,CAMA,cAAef,CAAAA,UAAU,CAACH,OAAO,CAACqC,eAAD,CAAkB,IAAlB,CAAP,CAA+BjC,YAA/B,CAAD,CAAzB","sourcesContent":["import React from 'react'\nimport Img from './Img'\nimport { connect } from 'react-redux';\nimport { url } from '../url'\nimport Axios from 'axios';\nimport { withRouter } from 'react-router-dom'\n\n\nclass CommentPanel extends React.Component {\n\n    state = {\n        comment:'',\n        loading: false\n        \n    }\n\n    handleInputChange = (e) => {\n        this.setState({\n            comment: e.target.value\n        })\n    }\n\n    handleSubmit = () => {\n        console.log(this.props.pid)\n        if (!this.props.auth.user) {\n          this.props.history.push('/signin');\n          return;\n        }\n\n        const comment = {\n            _id: Date.now().toString(),\n            pid: this.props.pid,\n            author: this.props.auth.user,\n            content: this.state.comment,\n            createdAt: new Date()\n        }\n\n        this.setState({loading: true});\n        Axios.post(url + '/postcomment', comment).then(res => {\n                this.setState({\n                    loading: false\n                })\n        })\n       window.location.reload();\n    }\n\n\n    render(){\n        return (\n            <div className=\"comment-panel\" style={{\"display\": (this.props.isShown?'flex':'none')}}  >\n                <Img src={url + \"/avatar/\" + this.props.auth.user + '.jpg'} \n                    alt=\"\"\n                    style={{\"height\": \"30px\", \"width\": \"30px\", \"border-radius\": \"15px\"}}/>\n                <input type=\"text\" \n                        onChange={this.handleInputChange} \n                        placeholder=\"Say something...\" required/>\n\n                {\n                    this.state.loading?\n                    <button onClick={this.handleSubmit} disabled={!this.state.comment}>Submitting...</button>\n                    :\n                    <button onClick={this.handleSubmit} disabled={!this.state.comment}>Submit</button>\n                }\n               \n            </div>\n        )\n    }\n\n\n    \n}\n\nconst mapStateToProps = (state) => {\n        return {\n            auth: state.auth\n        }\n    }\n\nexport default withRouter(connect(mapStateToProps, null)(CommentPanel))"]},"metadata":{},"sourceType":"module"}