{"ast":null,"code":"var _jsxFileName = \"/Users/peiwendu/Desktop/shuoshuo2.0/client/src/components/SignIn.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { url } from '../url';\nimport { connect } from 'react-redux';\nimport { login } from '../actions';\naxios.defaults.withCredentials = true;\n\nclass SignIn extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      un: '',\n      pw: '',\n      code: '',\n      error: '',\n      isLoading: ''\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const user = {\n        username: this.state.un,\n        password: this.state.pw\n      }; // console.log(user);\n      // //console.log(url);\n      // axios.post(url + '/checklogin',user).then(res => {\n      //     console.log(res.data);\n      //     this.setState({\n      //         code: res.data.code\n      //     })    \n      // });\n\n      this.setState({\n        isLoading: true\n      });\n      this.props.login(user).then(res => {\n        this.context.history.push('/');\n      }, err => {\n        this.setState({\n          error: err.response.data.error,\n          isLoading: false\n        });\n        console.log(err.response.data);\n      }).catch(e => console.log(e));\n    };\n  }\n\n  render() {\n    const username = this.props.auth.user;\n\n    if (username) {\n      window.location = '/';\n    }\n\n    return React.createElement(\"div\", {\n      className: \"signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-addon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      id: \"un\",\n      type: \"text\",\n      className: \"form-control\",\n      onChange: this.handleChange,\n      placeholder: \"Username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"input-group pw\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-addon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"glyphicon glyphicon-lock\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      id: \"pw\",\n      type: \"password\",\n      className: \"form-control\",\n      onChange: this.handleChange,\n      placeholder: \"Password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), this.state.error && React.createElement(\"span\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.state.error), this.state.isLoading ? React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"signin-btn\",\n      style: {\n        \"opacity\": \"0.5\"\n      },\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Logging in...\") : React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"signin-btn\",\n      disabled: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Log In\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth\n  };\n};\n\nexport default connect(mapStateToProps, {\n  login\n})(SignIn);","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/components/SignIn.js"],"names":["React","axios","url","connect","login","defaults","withCredentials","SignIn","Component","state","un","pw","code","error","isLoading","handleChange","e","setState","target","id","value","handleSubmit","preventDefault","user","username","password","props","then","res","context","history","push","err","response","data","console","log","catch","render","auth","window","location","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { url } from '../url'\nimport { connect } from 'react-redux';\nimport { login } from '../actions'\n\naxios.defaults.withCredentials = true;\n\nclass SignIn extends React.Component{\n\n    state = {\n        un:'',\n        pw:'',\n        code:'',\n        error:'',\n        isLoading:''\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        const user = {\n            username: this.state.un,\n            password: this.state.pw\n        }\n        // console.log(user);\n        // //console.log(url);\n        // axios.post(url + '/checklogin',user).then(res => {\n        //     console.log(res.data);\n        //     this.setState({\n        //         code: res.data.code\n        //     })    \n        // });\n\n        this.setState({isLoading: true});\n        this.props.login(user).then(\n            (res) => {\n                this.context.history.push('/');\n                \n            },\n            (err) => {\n                this.setState({ error: err.response.data.error, isLoading: false });\n                console.log(err.response.data)\n            }\n        ).catch(e => console.log(e))\n\n    }\n\n    render(){\n        const username = this.props.auth.user;\n        if(username){\n          window.location = '/'\n        } \n        return (\n            <div className=\"signin\">\n                <form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t<span className=\"input-group-addon\"><i className=\"glyphicon glyphicon-user\"></i></span>\n\t\t\t\t\t\t<input id=\"un\" \n\t\t\t\t\t\t    type=\"text\" \n\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\tplaceholder=\"Username\" />\n    \t\t\t\t\t</div>\t\t\t  \t\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t<div className=\"input-group pw\">\n\t\t\t\t\t\t<span className=\"input-group-addon\"><i className=\"glyphicon glyphicon-lock\"></i></span>\n\t\t\t\t\t\t<input id=\"pw\" \n\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\tplaceholder=\"Password\" />\n\t\t\t\t\t</div>\n                    <br/>    \n                    {\n                            this.state.error &&\n                            <span className=\"error\">{this.state.error}</span>\n                    }\n                    {\n                            this.state.isLoading?\n                            <button type=\"submit\" className=\"signin-btn\" style={{\"opacity\": \"0.5\"}}disabled={true}>Logging in...</button>\n                            :\n                            <button type=\"submit\" className=\"signin-btn\" disabled={false}>Log In</button>\n                    }\n                    \n                </form>\n            </div>          \n            \n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.auth\n    }\n}\n\nexport default connect(mapStateToProps, { login })(SignIn);"]},"metadata":{},"sourceType":"module"}