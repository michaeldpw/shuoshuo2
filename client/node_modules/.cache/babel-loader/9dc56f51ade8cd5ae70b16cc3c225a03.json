{"ast":null,"code":"import _defineProperty from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import{Redirect}from'react-router-dom';import{url,port}from'../url';axios.defaults.withCredentials=true;var SignIn=/*#__PURE__*/function(_React$Component){_inherits(SignIn,_React$Component);function SignIn(){var _getPrototypeOf2;var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={username:'',password:'',code:''};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.handleClick=function(){_this.props.history.push(url+':'+port+'/#/signup');console.log('jump to signup');};_this.handleSubmit=function(e){e.preventDefault();var user={username:_this.state.username,password:_this.state.password};console.log(user);axios.post(url+':5000/checklogin',user).then(function(res){//console.log(res.data);\n_this.setState({code:res.data.code});});};return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var code=this.state.code;if(code=='1'){window.location='/';}return React.createElement(\"div\",{className:\"signin-container\"},React.createElement(\"div\",{className:\"signin-panel\"},React.createElement(\"p\",null,\"Log in to Blog\"),React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"username\",onChange:this.handleChange,placeholder:\"Username\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",onChange:this.handleChange,placeholder:\"Password\"})),this.state.code===\"-1\"?React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"Username does not exist!\"):null,this.state.code===\"-2\"?React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"Incorrect password!\"):null,React.createElement(\"button\",{type:\"submit\",className:\"signin-btn\"},\"Log In\")),React.createElement(\"div\",{className:\"con\"},React.createElement(\"i\",null),React.createElement(\"p\",null,\"or\")),React.createElement(\"button\",{className:\"create_account\",onClick:this.handleClick},\"Create a new account\")));}}]);return SignIn;}(React.Component);export default SignIn;","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/pages/SignIn.js"],"names":["React","axios","Redirect","url","port","defaults","withCredentials","SignIn","state","username","password","code","handleChange","e","setState","target","id","value","handleClick","props","history","push","console","log","handleSubmit","preventDefault","user","post","then","res","data","window","location","Component"],"mappings":"8vBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,GAAT,CAAcC,IAAd,KAA0B,QAA1B,CACAH,KAAK,CAACI,QAAN,CAAeC,eAAf,CAAiC,IAAjC,C,GAEMC,CAAAA,M,2YAEFC,K,CAAQ,CACJC,QAAQ,CAAC,EADL,CAEJC,QAAQ,CAAC,EAFL,CAGJC,IAAI,CAAC,EAHD,C,OAMRC,Y,CAAe,SAACC,CAAD,CAAO,CAClB,MAAKC,QAAL,oBACKD,CAAC,CAACE,MAAF,CAASC,EADd,CACmBH,CAAC,CAACE,MAAF,CAASE,KAD5B,GAGH,C,OAEDC,W,CAAc,UAAM,CAChB,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwBlB,GAAG,CAAG,GAAN,CAAYC,IAAZ,CAAoB,WAA5C,EACAkB,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACH,C,OAEDC,Y,CAAe,SAACX,CAAD,CAAO,CAClBA,CAAC,CAACY,cAAF,GACA,GAAMC,CAAAA,IAAI,CAAG,CACTjB,QAAQ,CAAE,MAAKD,KAAL,CAAWC,QADZ,CAETC,QAAQ,CAAE,MAAKF,KAAL,CAAWE,QAFZ,CAAb,CAIAY,OAAO,CAACC,GAAR,CAAYG,IAAZ,EACAzB,KAAK,CAAC0B,IAAN,CAAWxB,GAAG,CAAE,kBAAhB,CAAmCuB,IAAnC,EAAyCE,IAAzC,CAA8C,SAAAC,GAAG,CAAI,CACjD;AACA,MAAKf,QAAL,CAAc,CACVH,IAAI,CAAEkB,GAAG,CAACC,IAAJ,CAASnB,IADL,CAAd,EAGH,CALD,EAMH,C,yEAEO,CACJ,GAAMA,CAAAA,IAAI,CAAG,KAAKH,KAAL,CAAWG,IAAxB,CAEA,GAAGA,IAAI,EAAI,GAAX,CAAe,CACboB,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CACD,MACI,4BAAK,SAAS,CAAC,kBAAf,EACI,2BAAK,SAAS,CAAC,cAAf,EACI,8CADJ,CAEI,4BAAM,QAAQ,CAAE,KAAKR,YAArB,EACI,2BAAK,SAAS,CAAC,YAAf,EACI,6BAAO,IAAI,CAAC,MAAZ,CACI,SAAS,CAAC,cADd,CAEI,EAAE,CAAC,UAFP,CAGI,QAAQ,CAAE,KAAKZ,YAHnB,CAII,WAAW,CAAC,UAJhB,EADJ,CADJ,CAQI,2BAAK,SAAS,CAAC,YAAf,EACI,6BAAO,IAAI,CAAC,UAAZ,CACI,SAAS,CAAC,cADd,CAEI,EAAE,CAAC,UAFP,CAGI,QAAQ,CAAE,KAAKA,YAHnB,CAII,WAAW,CAAC,UAJhB,EADJ,CARJ,CAgBQ,KAAKJ,KAAL,CAAWG,IAAX,GAAoB,IAApB,CACA,2BAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,6BADA,CACiF,IAjBzF,CAoBQ,KAAKH,KAAL,CAAWG,IAAX,GAAoB,IAApB,CACA,2BAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,wBADA,CAC4E,IArBpF,CAwBI,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,WAxBJ,CAFJ,CA4BI,2BAAK,SAAS,CAAC,KAAf,EACI,6BADJ,CAEI,kCAFJ,CA5BJ,CAgCI,8BAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,KAAKO,WAAjD,yBAhCJ,CADJ,CADJ,CAyCH,C,oBAjFgBlB,KAAK,CAACiC,S,EAoF3B,cAAe1B,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { url, port } from '../url'\naxios.defaults.withCredentials = true;\n\nclass SignIn extends React.Component{\n\n    state = {\n        username:'',\n        password:'',\n        code:''\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleClick = () => {\n        this.props.history.push(url + ':' + port  + '/#/signup');\n        console.log('jump to signup');\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        const user = {\n            username: this.state.username,\n            password: this.state.password\n        }\n        console.log(user);\n        axios.post(url +':5000/checklogin',user).then(res => {\n            //console.log(res.data);\n            this.setState({\n                code: res.data.code\n            })    \n        });\n    }\n\n    render(){\n        const code = this.state.code;\n        \n        if(code == '1'){\n          window.location = '/'\n        } \n        return (\n            <div className=\"signin-container\">\n                <div className=\"signin-panel\">\n                    <p>Log in to Blog</p>\n                    <form onSubmit={this.handleSubmit}>\n                        <div className=\"form-group\">\n                            <input type=\"text\" \n                                className=\"form-control\" \n                                id=\"username\" \n                                onChange={this.handleChange}\n                                placeholder=\"Username\" />\n                        </div>\n                        <div className=\"form-group\">\n                            <input type=\"password\" \n                                className=\"form-control\" \n                                id=\"password\" \n                                onChange={this.handleChange}\n                                placeholder=\"Password\" />\n                        </div>\n                        {\n                            this.state.code === \"-1\"?\n                            <div className=\"alert alert-danger\" role=\"alert\">Username does not exist!</div>: null\n                        }\n                        {\n                            this.state.code === \"-2\"?\n                            <div className=\"alert alert-danger\" role=\"alert\">Incorrect password!</div>: null\n                        }\n\n                        <button type=\"submit\" className=\"signin-btn\">Log In</button>\n                    </form>\n                    <div className=\"con\">\n                        <i></i>\n                        <p>or</p>\n                    </div>\n                    <button className=\"create_account\" onClick={this.handleClick}>Create a new account</button>\n                </div>\n                \n               \n                \n            </div>\n        )\n    }\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}