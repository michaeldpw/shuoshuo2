{"ast":null,"code":"import _defineProperty from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/peiwendu/Desktop/shuoshuo2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import{url}from'../url';import{connect}from'react-redux';import{login}from'../actions';axios.defaults.withCredentials=true;var SignIn=/*#__PURE__*/function(_React$Component){_inherits(SignIn,_React$Component);function SignIn(){var _getPrototypeOf2;var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SignIn)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={un:'',pw:'',code:'',error:'',isLoading:''};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.handleSubmit=function(e){e.preventDefault();var user={username:_this.state.un,password:_this.state.pw};// console.log(user);\n// //console.log(url);\n// axios.post(url + '/checklogin',user).then(res => {\n//     console.log(res.data);\n//     this.setState({\n//         code: res.data.code\n//     })    \n// });\n_this.setState({isLoading:true});_this.props.login(user).then(function(res){_this.context.history.push('/');},function(err){_this.setState({error:err.response.data.error,isLoading:false});console.log(err.response.data);}).catch(function(e){return console.log(e);});};return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var username=this.props.auth.user;if(username){window.location='/';}return React.createElement(\"div\",{className:\"signin\"},React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"input-group\"},React.createElement(\"span\",{className:\"input-group-addon\"},React.createElement(\"i\",{className:\"glyphicon glyphicon-user\"})),React.createElement(\"input\",{id:\"un\",type:\"text\",className:\"form-control\",onChange:this.handleChange,placeholder:\"Username\"})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"input-group pw\"},React.createElement(\"span\",{className:\"input-group-addon\"},React.createElement(\"i\",{className:\"glyphicon glyphicon-lock\"})),React.createElement(\"input\",{id:\"pw\",type:\"password\",className:\"form-control\",onChange:this.handleChange,placeholder:\"Password\"})),React.createElement(\"br\",null),this.state.error&&React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},this.state.error),this.state.isLoading?React.createElement(\"button\",{type:\"submit\",className:\"signin-btn\",style:{\"opacity\":\"0.5\"},disabled:true},\"Logging in...\"):React.createElement(\"button\",{type:\"submit\",className:\"signin-btn\",disabled:false},\"Log In\")));}}]);return SignIn;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps,{login:login})(SignIn);","map":{"version":3,"sources":["/Users/peiwendu/Desktop/shuoshuo2.0/client/src/components/SignIn.js"],"names":["React","axios","url","connect","login","defaults","withCredentials","SignIn","state","un","pw","code","error","isLoading","handleChange","e","setState","target","id","value","handleSubmit","preventDefault","user","username","password","props","then","res","context","history","push","err","response","data","console","log","catch","auth","window","location","Component","mapStateToProps"],"mappings":"8vBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,QAApB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,KAAT,KAAsB,YAAtB,CAEAH,KAAK,CAACI,QAAN,CAAeC,eAAf,CAAiC,IAAjC,C,GAEMC,CAAAA,M,2YAEFC,K,CAAQ,CACJC,EAAE,CAAC,EADC,CAEJC,EAAE,CAAC,EAFC,CAGJC,IAAI,CAAC,EAHD,CAIJC,KAAK,CAAC,EAJF,CAKJC,SAAS,CAAC,EALN,C,OAQRC,Y,CAAe,SAACC,CAAD,CAAO,CAClB,MAAKC,QAAL,oBACKD,CAAC,CAACE,MAAF,CAASC,EADd,CACmBH,CAAC,CAACE,MAAF,CAASE,KAD5B,GAGH,C,OAEDC,Y,CAAe,SAACL,CAAD,CAAO,CAClBA,CAAC,CAACM,cAAF,GACA,GAAMC,CAAAA,IAAI,CAAG,CACTC,QAAQ,CAAE,MAAKf,KAAL,CAAWC,EADZ,CAETe,QAAQ,CAAE,MAAKhB,KAAL,CAAWE,EAFZ,CAAb,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAKM,QAAL,CAAc,CAACH,SAAS,CAAE,IAAZ,CAAd,EACA,MAAKY,KAAL,CAAWrB,KAAX,CAAiBkB,IAAjB,EAAuBI,IAAvB,CACI,SAACC,GAAD,CAAS,CACL,MAAKC,OAAL,CAAaC,OAAb,CAAqBC,IAArB,CAA0B,GAA1B,EAEH,CAJL,CAKI,SAACC,GAAD,CAAS,CACL,MAAKf,QAAL,CAAc,CAAEJ,KAAK,CAAEmB,GAAG,CAACC,QAAJ,CAAaC,IAAb,CAAkBrB,KAA3B,CAAkCC,SAAS,CAAE,KAA7C,CAAd,EACAqB,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACC,QAAJ,CAAaC,IAAzB,EACH,CARL,EASEG,KATF,CASQ,SAAArB,CAAC,QAAImB,CAAAA,OAAO,CAACC,GAAR,CAAYpB,CAAZ,CAAJ,EATT,EAWH,C,yEAEO,CACJ,GAAMQ,CAAAA,QAAQ,CAAG,KAAKE,KAAL,CAAWY,IAAX,CAAgBf,IAAjC,CACA,GAAGC,QAAH,CAAY,CACVe,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CACD,MACI,4BAAK,SAAS,CAAC,QAAf,EACI,4BAAM,QAAQ,CAAE,KAAKnB,YAArB,EACX,2BAAK,SAAS,CAAC,aAAf,EACC,4BAAM,SAAS,CAAC,mBAAhB,EAAoC,yBAAG,SAAS,CAAC,0BAAb,EAApC,CADD,CAEC,6BAAO,EAAE,CAAC,IAAV,CACI,IAAI,CAAC,MADT,CAEC,SAAS,CAAC,cAFX,CAGC,QAAQ,CAAE,KAAKN,YAHhB,CAIC,WAAW,CAAC,UAJb,EAFD,CADW,CASV,8BATU,CAUX,2BAAK,SAAS,CAAC,gBAAf,EACC,4BAAM,SAAS,CAAC,mBAAhB,EAAoC,yBAAG,SAAS,CAAC,0BAAb,EAApC,CADD,CAEC,6BAAO,EAAE,CAAC,IAAV,CACC,IAAI,CAAC,UADN,CAEC,SAAS,CAAC,cAFX,CAGC,QAAQ,CAAE,KAAKA,YAHhB,CAIC,WAAW,CAAC,UAJb,EAFD,CAVW,CAkBI,8BAlBJ,CAoBY,KAAKN,KAAL,CAAWI,KAAX,EACA,2BAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,EAAkD,KAAKJ,KAAL,CAAWI,KAA7D,CArBZ,CAwBY,KAAKJ,KAAL,CAAWK,SAAX,CACA,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,CAA6C,KAAK,CAAE,CAAC,UAAW,KAAZ,CAApD,CAAuE,QAAQ,CAAE,IAAjF,kBADA,CAGA,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,CAA6C,QAAQ,CAAE,KAAvD,WA3BZ,CADJ,CADJ,CAoCH,C,oBAtFgBb,KAAK,CAACwC,S,EAyF3B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACjC,KAAD,CAAW,CAC/B,MAAO,CACH6B,IAAI,CAAE7B,KAAK,CAAC6B,IADT,CAAP,CAGH,CAJD,CAMA,cAAelC,CAAAA,OAAO,CAACsC,eAAD,CAAkB,CAAErC,KAAK,CAALA,KAAF,CAAlB,CAAP,CAAoCG,MAApC,CAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { url } from '../url'\nimport { connect } from 'react-redux';\nimport { login } from '../actions'\n\naxios.defaults.withCredentials = true;\n\nclass SignIn extends React.Component{\n\n    state = {\n        un:'',\n        pw:'',\n        code:'',\n        error:'',\n        isLoading:''\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n        const user = {\n            username: this.state.un,\n            password: this.state.pw\n        }\n        // console.log(user);\n        // //console.log(url);\n        // axios.post(url + '/checklogin',user).then(res => {\n        //     console.log(res.data);\n        //     this.setState({\n        //         code: res.data.code\n        //     })    \n        // });\n\n        this.setState({isLoading: true});\n        this.props.login(user).then(\n            (res) => {\n                this.context.history.push('/');\n                \n            },\n            (err) => {\n                this.setState({ error: err.response.data.error, isLoading: false });\n                console.log(err.response.data)\n            }\n        ).catch(e => console.log(e))\n\n    }\n\n    render(){\n        const username = this.props.auth.user;\n        if(username){\n          window.location = '/'\n        } \n        return (\n            <div className=\"signin\">\n                <form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t<span className=\"input-group-addon\"><i className=\"glyphicon glyphicon-user\"></i></span>\n\t\t\t\t\t\t<input id=\"un\" \n\t\t\t\t\t\t    type=\"text\" \n\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\tplaceholder=\"Username\" />\n    \t\t\t\t\t</div>\t\t\t  \t\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t<div className=\"input-group pw\">\n\t\t\t\t\t\t<span className=\"input-group-addon\"><i className=\"glyphicon glyphicon-lock\"></i></span>\n\t\t\t\t\t\t<input id=\"pw\" \n\t\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\t\tclassName=\"form-control\" \n\t\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t\tplaceholder=\"Password\" />\n\t\t\t\t\t</div>\n                    <br/>    \n                    {\n                            this.state.error &&\n                            <div className=\"alert alert-danger\" role=\"alert\">{this.state.error}</div>\n                    }\n                    {\n                            this.state.isLoading?\n                            <button type=\"submit\" className=\"signin-btn\" style={{\"opacity\": \"0.5\"}}disabled={true}>Logging in...</button>\n                            :\n                            <button type=\"submit\" className=\"signin-btn\" disabled={false}>Log In</button>\n                    }\n                    \n                </form>\n            </div>          \n            \n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        auth: state.auth\n    }\n}\n\nexport default connect(mapStateToProps, { login })(SignIn);"]},"metadata":{},"sourceType":"module"}